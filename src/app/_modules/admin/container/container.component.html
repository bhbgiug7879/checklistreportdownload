<section>
    <mat-toolbar color="primary">
        <button class="btn  ms-0 border-0" (click)="sidenav.toggle();sidebarToggle()" id="sidebar-button">
            <i class="fa-solid fa-bars fs-xsm bg-transparent text-white"
                [ngClass]="{'ml-custom-opened': isSideBarOpen, 'ml-custom-closed': !isSideBarOpen}"></i>
        </button>
        <span class="toolbar-item-spacer"></span>
        <button class="btn border-0 " [matMenuTriggerFor]="userAccountMenu" aria-label="User Account Menu">
            <div class="d-flex">
                <img class="img img-fluid rounded-circle" src="/assets/icons/man.png" style="height: 2.1rem;">
                <div class="ms-3 my-auto  text-start">
                    <p class="theme-tertiary fw-normal mb-0 lh-1 text-white">{{user}}</p>
                </div>
            </div>
        </button>

        <mat-menu #userAccountMenu [overlapTrigger]="false" yPosition="below">
            <button mat-menu-item routerLink="/auth/login/admin" (click)="logout()" class="text-center"
                style="display: flex; align-items: center;">
                <span class="my-auto d-inline-block"><img src="/assets/icons/logout.png" alt="logout-icon"></span>
                <span class="my-auto ms-1 line-height-4">Logout</span>
            </button>
        </mat-menu>
    </mat-toolbar>

    <mat-sidenav-container class="app-container">
        <mat-sidenav (mouseover)="mouseover()" (mouseleave)="mouseleave()" #sidenav mode="side" opened="true"
            [class.mat-elevation-z4]="true" class="app-sidenav custom-scrollbar">
            <a class="d-flex align-items-center news-logo">
                <img src="https://d2q4gipm2ebkzp.cloudfront.net/icons/footer-logo.svg" class="w-75"
                    *ngIf="isSideBarOpen && viewmenu">
                <img src="https://d2q4gipm2ebkzp.cloudfront.net/icons/footer-logo.svg" class="img-fluid"
                    *ngIf="!isSideBarOpen || !viewmenu" [ngClass]="{'shows':viewmenu}">
            </a>

            <mat-nav-list class="navlist-content">
                <div class="accordion menu-accordian ms-3 me-3 my-3" id="menuAccordian"
                    *ngFor="let menu of menus; let i = index">
                    <div class="accordion-item border-0 bg-transparent"
                        *ngIf="menu.subMenu && menu.subMenu.length !== 0 && menu.isShow; else withoutSubmenu">
                        <button class="accordion-link acc-btn collapsed"
                            [ngClass]="{'accordion-button' : isSideBarOpen}" type="button" data-bs-toggle="collapse"
                            [attr.data-bs-target]="'#menuCollapse' + i" aria-expanded="false"
                            aria-controls="collapseOne"> 
                            <img [src]="menu.icon" class="me-3 sidenav-icons" /> 
                            <span
                                class="d-block fs-d" [ngClass]="{'d-lg-none' : !isSideBarOpen  && !viewmenu}"
                                routerLinkActive="active">{{menu.screen_name}}</span>
                        </button>

                        <div [attr.id]="'menuCollapse'+ i" class="accordion-collapse collapse"
                            aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                            <ng-container *ngFor="let subMenu of menu.subMenu">
                                <button class="accordion-link secondary" *ngIf="subMenu.isShow"
                                    [routerLink]="[subMenu.path]" routerLinkActive="active"> <img [src]="subMenu.icon"
                                        class="me-3 sidenav-icons" /> <span class="d-block"
                                        [ngClass]="{'d-lg-none' : !isSideBarOpen && !viewmenu}">{{subMenu.screen_name}}</span></button>
                            </ng-container>
                        </div>
                    </div>
                    <ng-template #withoutSubmenu>
                        <button *ngIf="menu.isShow" class="accordion-link primary" [routerLink]="[menu.path]"
                            routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
                            <img [src]="menu.icon" class="me-3 sidenav-icons" /> <span class="d-block fs-d"
                                [ngClass]="{'d-lg-none': !isSideBarOpen && !viewmenu}">
                                {{ menu.screen_name }}
                            </span>
                        </button>
                    </ng-template>
                    
                </div>
            </mat-nav-list>
        </mat-sidenav>
        <mat-sidenav-content [ngClass]="{'sidenav-opened' : isSideBarOpen,'sidenav-closed' : !isSideBarOpen}">
            <div class="pt-4 router-container">
                <router-outlet></router-outlet>
            </div>
            <div class="row my-2">
                <div class="col-md-8">
                    <p class="mb-0 text-muted">Copyright 2023 Â© Gramosoft All rights reserved</p>
                </div>
                <div class="col-md-8"></div>
            </div>
        </mat-sidenav-content>
    </mat-sidenav-container>
</section>

